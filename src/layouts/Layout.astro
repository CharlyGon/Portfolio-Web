---
import "@fontsource-variable/onest";
import ParticlesComponent from "../components/sections/ParticlesComponent.astro";
import Header from "../components/layout/Header.astro";
import Footer from "../components/layout/Footer.astro";
import { ViewTransitions } from "astro:transitions";
import "../styles/globals.css";

const {
  title = "Gonzalo Fernández — Backend Node.js/TS",
  description = "Desarrollo backend en Node.js/TypeScript. Microservicios, automatización y buenas prácticas.",
  ogImage = "/og-default.png",
  lang = "es",
} = Astro.props;
---

<!doctype html>
<html lang={lang} class="dark scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content={description} />
    <title>{title}</title>

    <!-- OG/Twitter -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="icon" type="image/svg+xml" href="/code-dots.svg" />
    <ViewTransitions />

    <!-- JSON-LD Person -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Person",
        name: "Gonzalo Fernández",
        jobTitle: "Backend Developer",
        url: "https://gonzalofernandez.netlify.app/",
        sameAs: [
          "https://www.linkedin.com/in/gonzalo-nicolas-fernandez",
          "https://github.com/CharlyGon"
        ],
        knowsAbout: ["Node.js","TypeScript","AWS","Microservicios","Docker"]
      })}
    </script>
  </head>

  <body class="bg-black text-white antialiased min-h-dvh">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-white/10 px-3 py-2 rounded-lg">
      Saltar al contenido
    </a>

    <!-- Fondo oscuro fijo -->
   <div
  id="background-div"
  class="absolute inset-0 -z-10 w-full h-full"
  style="background: radial-gradient(125% 125% at 50% 90%, #000 40%, #63e 100%);"
></div>

<ParticlesComponent />

    <Header />

    <main id="main-content" class="mx-auto max-w-6xl px-4">
      <slot />
    </main>

    <Footer />

    <style is:global>
      :root { color-scheme: dark; }  /* inputs/scrollbars oscuros */
      html { font-family: "Onest Variable", system-ui, sans-serif; }

      #header-nav {
        animation: blur linear both 0.5s;
        animation-timeline: scroll();
        animation-range: 0 500px;
      }

      @keyframes blur {
        to {
          backdrop-filter: blur(20px);
          border-width: 1px;
          border-color: rgba(0, 0, 0);
          padding: 0.25rem 0.75rem;
          display: flex; flex-direction: row; align-items: center;
          background-color: rgba(0,0,0,.3);
          border-radius: 9999px;
        }
      }

      .link-active { @apply bg-white/10 font-semibold shadow-lg shadow-white/10 backdrop-blur-2xl; }
    </style>
  </body>
</html>
