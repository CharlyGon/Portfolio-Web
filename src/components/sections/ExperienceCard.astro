---
import CompanyLogo from "@/components/ui/CompanyLogo.astro";

interface Props {
    company: string;
    logo?: string;
    role: string;
    period: string;
    summary: string;
    impact?: string[];
    stack?: string[];
    url?: string;
}

const {
    company,
    logo,
    role,
    period,
    summary,
    impact = [],
    stack = [],
    url,
} = Astro.props;
---

<article
    class="rounded-2xl border border-white/10 bg-white/5 hover:bg-white/7 transition p-6 flex gap-4"
>
    {
        logo ? (
            <CompanyLogo
                src={logo}
                name={company}
                size={64}
                padding={8}
                preserveColors={true}
            />
        ) : (
            <CompanyLogo name={company} size={64} padding={8} />
        )
    }

    <div>
        <h3 class="text-lg font-semibold">{role}</h3>
        <p class="text-sm opacity-80 flex items-center gap-2">
            <span>{company} Â· {period}</span>
            {
                url && (
                    <a
                        href={url}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-sky-400 hover:text-sky-300 underline inline-flex items-center gap-1"
                    >
                        Ver Empresa
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="w-3.5 h-3.5"
                            viewBox="0 0 24 24"
                            fill="currentColor"
                        >
                            <>
                                <path d="M14 3h7v7h-2V6.414l-9.293 9.293-1.414-1.414L17.586 5H14V3Z" />
                                <path d="M5 5h6v2H7v10h10v-4h2v6H5V5Z" />
                            </>
                        </svg>
                    </a>
                )
            }
        </p>
        <p class="mt-2 opacity-90">{summary}</p>
        {
            impact?.length > 0 && (
                <ul class="mt-3 list-disc list-inside text-sm space-y-1 opacity-90">
                    {impact.map((i) => (
                        <li>{i}</li>
                    ))}
                </ul>
            )
        }
        {
            stack?.length > 0 && (
                <ul class="mt-4 flex flex-wrap gap-2 text-xs">
                    {stack.map((t) => (
                        <li class="rounded-full px-2 py-1 bg-white/10 border border-white/10">
                            {t}
                        </li>
                    ))}
                </ul>
            )
        }
    </div>
</article>
