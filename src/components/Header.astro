---
const navItems = [
    {
        title: "Home",
        label: "home",
        url: "/#home",
    },
    {
        title: "Experience",
        label: "experience",
        url: "/#experience",
    },
    {
        title: "Projects",
        label: "projects",
        url: "/#projects",
    },
    {
        title: "About Me",
        label: "aboutMe",
        url: "/#aboutMe",
    },
    {
        title: "Contact",
        label: "contact",
        url: "/#contact",
    },
];
---

<header
    class="h-14 flex justify-center items-center mx-auto pt-2 sticky top-0 w-full z-10"
>
    <nav
        class={`
      w-full md:w-3/4 lg:w-1/2 xl:w-2/5 h-full
      border-2 border-gray-500 rounded-full md:px-6 px-3 py-1
      flex flex-wrap flex-row items-center justify-center
      bg-neutral-200/70 dark:bg-black/50 backdrop-blur-2xl
    `}
    >
        {
            navItems.map((link) => (
                <a
                    class="hover:bg-white/10 p-1 rounded-full px-2 sm:px-3 transition ease-in text-sm sm:text-base capitalize"
                    aria-label={link.label}
                    href={link.url}
                >
                    {link.title}
                </a>
            ))
        }
    </nav>
</header>

<script>
    document.addEventListener("astro:page-load", () => {
        const sections = document.querySelectorAll("section");
        const navItems = document.querySelectorAll("header nav a");

        const callback = (entries: any[]) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    navItems.forEach((item) => {
                        if (
                            item.getAttribute("aria-label") == entry.target.id
                        ) {
                            item.classList.add("link-active");
                        } else {
                            item.classList.remove("link-active");
                        }
                    });
                }
            });
        };

        const observer = new IntersectionObserver(callback, {
            root: null,
            rootMargin: "0px",
            threshold: 0.3,
        });

        sections.forEach((section) => {
            observer.observe(section);
        });

        // Cleanup function
        window.onunload = () => {
            observer.disconnect();
        };
    });
</script>

<style>
    nav {
        animation: nav-shadown 1s linear both;
        animation-timeline: scroll();
        animation-range: 0 400px;
    }
    @keyframes nav-shadown {
        to {
            @apply shadow-xl;
        }
    }
</style>

<!-- <header
    class={`
    flex justify-center items-center
    mx-auto
    py-5
    sticky top-0
    w-full xl:w-[1120px]
    z-10 
  `}
>
    <nav
        class={`
      border border-black rounded-full
      px-8 py-1
      flex flex-row items-center
      bg-neutral-200 dark:bg-black/50
      backdrop-blur-2xl
    `}
    >
        <a
            class="hover:bg-white/10 rounded-full px-3 transition"
            href="/#home">Home</a
        >
        <a
            class="hover:bg-white/10 rounded-full px-3 transition"
            href="/#experience">Experience</a
        >
        <a
            class="hover:bg-white/10 rounded-full px-3 transition"
            href="/#projects">Projects</a
        >
        <a
            class="hover:bg-white/10 rounded-full px-3 transition"
            href="/#aboutme">About</a
        >
        <a
            class="hover:bg-white/10 rounded-full px-3 transition"
            href="/#contact">Contact</a
        >
    </nav>
</header> -->
